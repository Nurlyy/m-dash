<div id="page-wrapper" class="gray-bg">
    <div class="row border-bottom">
        <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i
                        class="fa fa-bars"></i> </a>
                <ul class="nav navbar-top-links navbar-left m-t-15">
                    <li>
                        <div class="filter_datetime p-t-0 f-l">
                            <!-- v:004-92M -->
                            <div id="reportrange" class="form-control b-none">
                                <i class="fa fa-calendar p-r-5"></i>
                                <span></span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <ul class="nav navbar-top-links navbar-right">
                <li>
                    <a href="info.html">
                        <i class="fa fa-info-circle" style="color: #1ab394;"></i>
                    </a>
                </li>
                <li>
                    <a href="logout.html">
                        <i class="fa fa-sign-out"></i> Log out
                    </a>
                </li>
            </ul>
        </nav>
    </div>


    <div class="wrapper wrapper-content">
        
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox ">
                    <div class="ibox-content">
                        <div id="container_dynamic"></div>
                    </div>
                </div>
            </div>
            

        </div>

        <div class="row">

            <div class="col-lg-6">
                <div class="ibox ">
                    <div class="ibox-title">
                        <h5><strong>Топ Регионов</strong></h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
                                <li><a href="#" class="dropdown-item">Config option 1</a>
                                </li>
                                <li><a href="#" class="dropdown-item">Config option 2</a>
                                </li>
                            </ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="tabs-container">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>№</th>
                                        <th>Регион </th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>Алматинская область</td>
                                        <td><i class="fa fa-arrow-down" style='color:crimson' aria-hidden="true"></i> 7918</td></tr>
                                    <tr>
                                        <td>2</td>
                                        <td>Акмолинская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 7835</td></tr>
                                    <tr>
                                        <td>3</td>
                                        <td>Улытауская область</td>
                                        <td><i class="fa fa-arrow-down" style='color:crimson' aria-hidden="true"></i> 7773</td></tr>
                                    <tr>
                                        <td>4</td>
                                        <td>Восточно-Казахстанская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 7658</td></tr>
                                    <tr>
                                        <td>5</td>
                                        <td>Абайская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 7390</td></tr>
                                    <tr>
                                        <td>6</td>
                                        <td>Западно-Казахстанская область</td>
                                        <td><i class="fa fa-arrow-down" style='color:crimson' aria-hidden="true"></i> 6791</td></tr>
                                    <tr>
                                        <td>7</td>
                                        <td>Карагандинская область</td>
                                        <td><i class="fa fa-arrow-down" style='color:crimson' aria-hidden="true"></i> 6542</td></tr>
                                    <tr>
                                        <td>8</td>
                                        <td>Костанайская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 6525</td></tr>
                                    <tr>
                                        <td>9</td>
                                        <td>Жетысуская область</td>
                                        <td><i class="fa fa-arrow-down" style='color:crimson' aria-hidden="true"></i> 5845</td></tr>
                                    <tr>
                                        <td>10</td>
                                        <td>Актюбинская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 4554</td></tr>
                                    <tr>
                                        <td>11</td>
                                        <td>Атырауская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 4079</td></tr>
                                    <tr>
                                        <td>12</td>
                                        <td>Туркестанская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 4005</td></tr>
                                    <tr>
                                        <td>13</td>
                                        <td>Жамбылская область</td>
                                        <td><i class="fa fa-arrow-down" style='color:crimson' aria-hidden="true"></i> 3468</td></tr>
                                    <tr>
                                        <td>14</td>
                                        <td>Мангистауская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 3068</td></tr>
                                    <tr>
                                        <td>15</td>
                                        <td>Павлодарская область</td>
                                        <td><i class="fa fa-arrow-down" style='color:crimson' aria-hidden="true"></i> 2509</td></tr>
                                    <tr>
                                        <td>16</td>
                                        <td>Кызылординская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 2454</td></tr>
                                    <tr>
                                        <td>17</td>
                                        <td>Северо-Казахстанская область</td>
                                        <td><i class="fa fa-arrow-up" style='color:#1ab394' aria-hidden="true"></i> 2026</td></tr>
                                    
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-6">
                <div class="ibox ">
                    <div class="ibox-title">
                        <h5><strong>Тональность по регионам</strong></h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
                                <li><a href="#" class="dropdown-item">Config option 1</a>
                                </li>
                                <li><a href="#" class="dropdown-item">Config option 2</a>
                                </li>
                            </ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div id="container_sentiment"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div>
            Смыслы и послания данного сайта созданы командой iMAS, не пытайтесь их повторить. "iMAS GROUP". 2014
            - ∞
        </div>
    </div>

</div>

<?php 

$this->registerJs("


function do_daterangepicker_stuff(start, end, label) {
    $('#reportrange span').html(start.format('D.MM.YYYY') + ' - ' + end.format('D.MM.YYYY'));
}
function create_daterangepicker() {
    // v:004-92M
    const string_date = '15.10.2021 - 15.11.2021';
    const daterangepicker_setting = {
        format: 'DD.MM.YYYY',
        startDate: '15.10.2021',
        endDate: '15.11.2021',
        minDate: '01.10.2021',
        maxDate: '31.12.2021',
        showDropdowns: true,
        // showWeekNumbers: true,
        timePicker: false,
        timePickerIncrement: 1,
        timePicker12Hour: true,

        opens: 'right',
        drops: 'down',
        buttonClasses: ['btn', 'btn-sm'],
        applyClass: 'btn-primary daterangepicker-apply-button',
        cancelClass: 'btn-default daterangepicker-cancel-button',
        separator: ' to ',
        locale: {
            applyLabel: 'Ок',
            cancelLabel: 'Отмена',
            fromLabel: 'от',
            toLabel: 'по',
            customRangeLabel: 'Период',
            daysOfWeek: [
                'Вс', 
                'Пн', 
                'Вт', 
                'Ср', 
                'Чт', 
                'Пт', 
                'Сб'
            ],
            monthNames: [
                'Январь', 
                'Февраль', 
                'Март', 
                'Апрель', 
                'Май', 
                'Июнь', 
                'Июль', 
                'Август', 
                'Сентябрь', 
                'Октябрь', 
                'Ноябрь', 
                'Декабрь'
            ],
            firstDay: 1
        }
    };
    // Формирование календаря для больших экаранов
    $('#reportrange span').html(string_date);
    $('#reportrange').daterangepicker(daterangepicker_setting, do_daterangepicker_stuff);
    // Формирование календаря для малых экаранов
    $('#reportrange-header span').html(string_date);
    $('#reportrange-header').daterangepicker(daterangepicker_setting, do_daterangepicker_stuff);
}
");

$this->registerJs("
$(document).ready(function () {
    create_daterangepicker();
    // Instantiate the map
    // Prepare demo data
    // Data is joined to map using value of 'hc-key' property by default.
    // See API docs for 'joinBy' for more info on linking data and map.
    

    Highcharts.chart('container_dynamic', {

        title: {
            text: 'Регионы'
        },

        yAxis: [
            {
                title: {
                    text: 'Кол-во'
                }
            },
            {
                title: {
                    text: 'Кол-во публикации'
                },
                opposite: true
            }
        ],

        xAxis: {
            accessibility: {
                rangeDescription: 'Показатель'
            },
            categories: [
                '21.9.2022',
                '22.9.2022',
                '23.9.2022',
                '24.9.2022',
                '25.9.2022',
                '26.9.2022',
                '27.9.2022',
                '28.9.2022',
                '29.9.2022',
                '30.9.2022',
                '31.9.2022',
                '01.10.2022',
                '02.10.2022',
                '03.10.2022',
                '04.10.2022',
                '05.10.2022',
                '06.10.2022',
                '07.10.2022',
                '08.10.2022',
                '09.10.2022',
                '10.10.2022',
                '11.10.2022',
                '12.10.2022',
                '13.10.2022',
                '14.10.2022',
                '15.10.2022',
                '16.10.2022',
                '17.10.2022',
                '18.10.2022',
                '19.10.2022',
            ]
        },

        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle'
        },

        plotOptions: {
            series: {
                label: {
                    connectorAllowed: false
                },
            }
        },

        series: [{
            name: 'Алматинская Обл.',
            data: [167, 180, 167, 172, 175, 175, 165, 178, 165, 166, 164, 161, 162, 177, 170, 175, 179, 166, 175, 161, 160, 167, 160, 177, 160, 169, 162, 169, 180, 179, 179]
        }, {
            name: 'Акмолинская обл.',
            data: [149, 143, 152, 159, 155, 153, 146, 157, 146, 143, 151, 146, 158, 154, 141, 155, 155, 145, 160, 141, 150, 140, 159, 153, 155, 143, 150, 143, 154, 148, 155]
        }, {
            name: 'Костанайская обл.',
            data: [145, 148, 147, 140, 143, 130, 144, 137, 131, 139, 149, 145, 145, 145, 136, 137, 149, 134, 149, 131, 149, 134, 139, 134, 143, 145, 144, 150, 137, 132, 136]
        }, {
            name: 'Абайская обл.',
            data: [127, 135, 129, 129, 131, 122, 121, 140, 127, 140, 125, 128, 129, 133, 140, 122, 122, 139, 140, 140, 133, 140, 122, 132, 139, 121, 136, 123, 123, 138, 132] 
        },{
            name: 'ВКО',
            data: [110, 116, 113, 114, 120, 123, 118, 110, 118, 128, 130, 124, 117, 115, 116, 110, 122, 128, 127, 124, 115, 119, 116, 117, 125, 121, 130, 129, 120, 110, 126]
        },{
            name: 'ЗКО',
            data: [118, 114, 108, 102, 111, 113, 111, 120, 116, 108, 114, 106, 103, 107, 113, 109, 117, 117, 108, 116, 115, 119, 108, 100, 101, 100, 104, 106, 113, 105, 119]
        },{
            name: 'СКО',
            data: [102, 92, 103, 97, 98, 102, 108, 92, 97, 107, 103, 106, 91, 90, 98, 100, 97, 101, 104, 100, 99, 99, 102, 97, 109, 104, 102, 94, 103, 92, 105]
        },{
            name: 'Актюбинская обл.',
            data: [89, 99, 92, 88, 99, 88, 97, 97, 97, 90, 85, 82, 86, 82, 90, 88, 86, 96, 89, 80, 86, 81, 92, 83, 95, 94, 87, 100, 92, 87, 90]
        },{
            name: 'Атырауская обл.',
            data: [84, 79, 89, 90, 83, 70, 81, 76, 71, 81, 90, 72, 88, 70, 72, 84, 83, 81, 89, 88, 79, 85, 84, 80, 77, 73, 77, 84, 85, 88, 82]
        },{
            name: 'Жамбылская обл.',
            data: [89, 100, 98, 90, 94, 90, 94, 80, 81, 95, 83, 91, 98, 100, 100, 83, 95, 89, 83, 95, 86, 90, 87, 84, 89, 93, 85, 99, 83, 90, 93]
        },{
            name: 'Карагандинская обл.',
            data: [180, 173, 162, 169, 175, 167, 162, 161, 169, 170, 178, 176, 173, 164, 178, 171, 174, 166, 162, 175, 170, 179, 176, 170, 171, 171, 176, 164, 165, 178, 168] 
        },{
            name: 'Кызылординская обл.',
            data: [160, 140, 158, 150, 143, 140, 152, 148, 152, 156, 149, 147, 156, 151, 142, 157, 156, 152, 155, 156, 158, 153, 157, 147, 152, 151, 142, 151, 146, 160, 159]
        },{
            name: 'Мангистауская обл.',
            data: [137, 131, 140, 150, 150, 146, 135, 147, 136, 134, 136, 148, 136, 150, 150, 150, 130, 145, 146, 130, 137, 133, 136, 146, 139, 150, 135, 137, 132, 148, 132]
        },{
            name: 'Павлодарская обл.',
            data: [122, 133, 124, 134, 123, 121, 125, 133, 137, 120, 131, 140, 136, 126, 125, 130, 136, 121, 122, 131, 122, 140, 135, 122, 128, 121, 129, 134, 132, 138, 122] 
        },{
            name: 'Туркестанская обл.',
            data: [118, 123, 114, 127, 130, 126, 123, 116, 120, 115, 122, 128, 120, 129, 126, 127, 120, 122, 118, 130, 111, 117, 121, 125, 128, 124, 110, 125, 116, 125, 120]
        },{
            name: 'Жетысуская обл.',
            data: [116, 116, 117, 119, 115, 118, 105, 111, 104, 110, 106, 108, 115, 116, 115, 114, 102, 101, 102, 106, 102, 102, 101, 106, 103, 112, 113, 101, 105, 110, 114] 
        },{
            name: 'Улытауская обл.',
            data: [92, 110, 106, 97, 90, 93, 103, 107, 99, 110, 106, 106, 95, 103, 99, 103, 109, 109, 96, 100, 110, 107, 90, 101, 104, 98, 95, 108, 98, 99, 110]
        }],

        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        }

    });
});
");

$this->registerJs("
Highcharts.chart('container_sentiment', {
    chart: {
        type: 'column'
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: ['Акмолинская', 'Улытауская', 'Алматинская', 'СКО', 'Абайская', 'Карагандинская', 'Кызылординская', 'Мангистауская', 'Костанайская', 'Актюбинская', 'ВКО' , 'Жамбылская', 'ЗКО','Жетысуская','Атырауская','Павлодарская','Туркестанская']
    },
    yAxis: {
        min: 0,
        title: {
            text: ''
        }
    },
    tooltip: {
        pointFormat: '<span style=\"color:{series.color}\">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
        shared: true
    },
    plotOptions: {
        column: {
            stacking: 'percent'
        }
    },
    series: [{
        name: 'Негатив',
        data: [4, 2, 8, 8, 10, 4, 1, 7, 12, 4, 6, 10, 2, 8, 1, 11, 5],
        color: 'crimson'
    }, {
        name: 'Нейтрал',
        data: [35, 36, 35, 40, 31, 35, 33, 35, 40, 35, 40, 31, 34, 32, 32, 38, 39],
    }, {
        name: 'Позитив',
        data: [8, 13, 16, 8, 19, 8, 19, 10, 20, 16, 19, 15, 18, 16, 9, 12, 8],
        color: '#1ab394'
    }]
});
");